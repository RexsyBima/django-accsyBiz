{% extends "base.html" %}
{% block content %}
    <div class="container mt-4">
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li class="{{ message.tags }}">{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        <h1>{{ place.name }}</h1>
        <div class="row">
            <div class="col-md-6">
                <p><strong>Legal Name:</strong> {{ place.legal_name|default:"N/A" }}</p>
                <p><strong>Business Activity:</strong> {{ place.business_category|default:"N/A" }}</p>
                <p><strong>Address:</strong> {{ place.address|default:"N/A" }}</p>
                <p><strong>City:</strong> {{ place.city }}</p>
                <p><strong>State:</strong> {{ place.state }}</p>
                <p><strong>ZIP Code:</strong> {{ place.zip_code|default:"N/A" }}</p>
                <p><strong>Category:</strong> {{ place.category|default:"N/A" }}</p>
                <p><strong>License Status:</strong> {{ place.license_status|default:"N/A" }}</p>
            </div>
            <div class="col-md-6">
                {% if place.latitude and place.longitude %}
                    <p><strong>Latitude:</strong> {{ place.latitude }}</p>
                    <p><strong>Longitude:</strong> {{ place.longitude }}</p>
                {% endif %}
                <p><strong>Neighborhood:</strong> {{ place.neighborhood|default:"N/A" }}</p>
                <p><strong>Community Area:</strong> {{ place.community_area_name|default:"N/A" }}</p>
            </div>
        </div>
        {% for feature in features%}
        <p>{{ feature }}</p>
        {% endfor %}
        {% for feature in features_posts%}
        <p>{{ feature.user }} says</p>
        <p>{{ feature.feature }}</p>
        <p>{{ feature.body_data }}</p>
        <p>total vote: {{feature.total_votes}}</p>
        <form method="POST" action="{% url 'handle_vote' place.id %}?feature_id={{feature.id}}">
            {% csrf_token %}
            <button type="submit" name="vote" value="upvote" class="inline-flex h-12 items-center justify-center rounded-md bg-neutral-950 px-6 font-medium text-neutral-50 transition active:scale-110">Upvote</button>
            <button type="submit" name="vote" value="neutral" class="inline-flex h-12 items-center justify-center rounded-md bg-neutral-950 px-6 font-medium text-neutral-50 transition active:scale-110">Become Neutral</button>
            <button type="submit" name="vote" value="downvote" class="inline-flex h-12 items-center justify-center rounded-md bg-neutral-950 px-6 font-medium text-neutral-50 transition active:scale-110">Downvote</button>
        </form>
        {% endfor %}
        {% for comment in comments  %}
        {{comment.body|safe}}
        
        {% endfor %}

        <a href="{% url 'comment_form' place.id %}">Post Comment Here</a>
        <a href="{% url 'feature_form' place.id %}">Post Feature Here</a>

    </div>
{% endblock content %}

